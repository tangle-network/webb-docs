---
title: Running with Systemd
description: Run a Tangle Validator node using systemd.
---

# Running with Systemd

You can run your validator node as a Systemd process so that it will automatically restart on server reboots
or crashes (and helps to avoid getting slashed!).

Before following this guide you should have already set up your machines environment, installed the dependencies, and
compiled the Tangle binary. If you have not done so, please refer to the [Requirements](/docs/tangle-network/node-operators/requirements) page.

## Standalone Testnet

### Generate and store keys

We need to generate the required keys for our node. For more information on these keys, please see the [Required Keys](https://docs.webb.tools/docs/tangle-network/node-operators/required-keys/) section.
The keys we need to generate include the following:

- DKG key (Ecdsa)
- Aura key (Sr25519)
- Account key (Sr25519)
- Grandpa key (Ed25519)
- ImOnline key (Sr25519)

Let's now insert our required secret keys, we will not pass the SURI in the command, instead it will be interactive, where you
should paste your SURI when the command asks for it.

**Account Keys**

```
# it will ask for your suri, enter it.
./target/release/tangle-standalone key insert --base-path /data/validator/<USERNAME> \
--chain ./chainspecs/tangle-standalone.json \
--scheme Sr25519 \
--suri <SURI> \
--key-type acco
```

**Aura Keys**

```
# it will ask for your suri, enter it.
./target/release/tangle-standalone key insert --base-path /data/validator/<USERNAME> \
--chain ./chainspecs/tangle-standalone.json \
--scheme Sr25519 \
--suri <SURI> \
--key-type aura
```

**Im-online Keys** - **these keys are optional**

```
# it will ask for your suri, enter it.
./target/release/tangle-standalone key insert --base-path /data/validator/<USERNAME> \
--chain ./chainspecs/tangle-standalone.json \
--scheme Sr25519 \
--suri <SURI> \
--key-type imon
```

**DKG Keys**

```
# it will ask for your suri, enter it.
./target/release/tangle-standalone key insert --base-path /data/validator/<USERNAME> \
--chain ./chainspecs/tangle-standalone.json \
--scheme Ecdsa \
--suri <SURI> \
--key-type wdkg
```

**Grandpa Keys**

```
# it will ask for your suri, enter it.
./target/release/tangle-standalone key insert --base-path /data/validator/<USERNAME> \
--chain ./chainspecs/tangle-standalone.json \
--scheme Ed25519 \
--suri <SURI> \
--key-type gran
```

To ensure you have successfully generated the keys correctly run:

```
ls ~/data/validator/<USERNAME>/keystore
# You should see a some file(s) there, these are the keys.
```

## System service setup

Run the following commands to create the service configuration file:

```
# Move the tangle-standalone binary to the bin directory (assumes you are in repo root directory)
sudo mv ./target/release/tangle-standalone /usr/bin/

# navigate to /etc
cd /etc/systemd/system

# create the service configuration file
sudo touch validator.service
```

Add the following contents to the service configuration file. Make sure to replace the **USERNAME** with the username you created in the previous step, add your own node name, and update any paths or ports to your own preference.

**Note:** The below configuration assumes you are targeting the Tangle Network chainspec.

**Validator Node**

```
[Unit]
Description=Tangle Validator Node
After=network-online.target
StartLimitIntervalSec=0

[Service]
User=<USERNAME>
Restart=always
RestartSec=3
ExecStart=/usr/bin/tangle-standalone \
  --base-path /data/validator/<USERNAME> \
  --name <NODE-NAME> \
  --chain tangle \
  --node-key-file "/home/<USERNAME>/node-key" \
  --port 30333 \
  --validator \
  --no-mdns

[Install]
WantedBy=multi-user.target
```

### Enable the services

Double check that the config has been written to `/etc/systemd/system/validator.service` correctly.
If so, enable the service so it runs on startup, and then try to start it now:

```
sudo systemctl enable validator

sudo systemctl start validator
```

Check the status of the service:

```
systemctl status validator
```

You should see the node connecting to the network and syncing the latest blocks.
If you need to tail the latest output, you can use:

```
journalctl -u validator.service -f
```

Congratulations! You have officially setup an Tangle Network node using Systemd. If you are interested
in learning how to setup monitoring for your node, please refer to the [monitoring](/docs/tangle-network/node-operators/monitoring/quickstart) page.

## Parachain Testnet

### Generate and store keys

We need to generate the required keys for our node. For more information on these keys, please see the [Required Keys](https://docs.webb.tools/docs/tangle-network/node-operators/required-keys/) section.
The keys we need to generate include the following:

- DKG key (Ecdsa)
- Aura key (Sr25519)
- Account key (Sr25519)
- Nimbus key (Sr25519)
- Rand key (Sr25519)
- ImOnline key (Sr25519)

Let's now insert our required secret keys, we will not pass the SURI in the command, instead it will be interactive, where you
should paste your SURI when the command asks for it.

**Account Keys**

```
# it will ask for your suri, enter it.
./target/release/tangle-parachain key insert --base-path /data/validator/<USERNAME> \
--chain ./chainspecs/tangle-parachain.json \
--scheme Sr25519 \
--suri <SURI> \
--key-type acco
```

**Aura Keys**

```
# it will ask for your suri, enter it.
./target/release/tangle-parachain key insert --base-path /data/validator/<USERNAME> \
--chain ./chainspecs/tangle-parachain.json \
--scheme Sr25519 \
--suri <SURI> \
--key-type aura
```

**Im-online Keys** - **these keys are optional**

```
# it will ask for your suri, enter it.
./target/release/tangle-parachain key insert --base-path /data/validator/<USERNAME> \
--chain ./chainspecs/tangle-parachain.json \
--scheme Sr25519 \
--suri <SURI> \
--key-type imon
```

**DKG Keys**

```
# it will ask for your suri, enter it.
./target/release/tangle-parachain key insert --base-path /data/validator/<USERNAME> \
--chain ./chainspecs/tangle-parachain.json \
--scheme Ecdsa \
--suri <SURI> \
--key-type wdkg
```

**Nimbus Keys**

```
docker run --rm -it --platform linux/amd64 --network="host" -v "/var/lib/data" \
ghcr.io/webb-tools/tangle/tangle-parachain:main \
    tangle-parachain key insert --base-path /data \
    --chain /data/chainspecs/tangle-parachain.json \
    --scheme Sr25519 \
    --key-type nmbs
```

**Rand Keys**

```
docker run --rm -it --platform linux/amd64 --network="host" -v "/var/lib/data" \
ghcr.io/webb-tools/tangle/tangle-parachain:main \
    tangle-parachain key insert --base-path /data \
    --chain /data/chainspecs/tangle-parachain.json \
    --scheme Sr25519 \
    --key-type rand
```

To ensure you have successfully generated the keys correctly run:

```
ls ~/data/validator/<USERNAME>/keystore
# You should see a some file(s) there, these are the keys.
```

## System service setup

Run the following commands to create the service configuration file:

```
# Move the tangle-parachain binary to the bin directory (assumes you are in repo root directory)
sudo mv ./target/release/tangle-parachain /usr/bin/

# navigate to /etc
cd /etc/systemd/system

# create the service configuration file
sudo touch collator.service
```

Add the following contents to the service configuration file. Make sure to replace the **USERNAME** with the username you created in the previous step, add your own node name, and update
any paths or ports to your own preference.

**Note:** The below configuration assumes you are targeting the Tangle Network chainspec.

**Collator Node**

```
[Unit]
Description=Tangle Collator Node
After=network-online.target
StartLimitIntervalSec=0

[Service]
User=<USERNAME>
Restart=always
RestartSec=3
ExecStart=/usr/bin/tangle-parachain \
  --base-path /data/collator/<USERNAME> \
  --name <NODE-NAME> \
  --chain tangle \
  --node-key-file "/home/<USERNAME>/node-key" \
  --port 30333 \
  --collator \
  --no-mdns \
  --wasm-execution compiled \
  --trie-cache-size 0 \
  -- \
  --execution wasm \
  --name="YOUR-NODE-NAME (Embedded Relay)"

[Install]
WantedBy=multi-user.target
```

### Enable the services

Double check that the config has been written to `/etc/systemd/system/validator.service` correctly.
If so, enable the service so it runs on startup, and then try to start it now:

```
sudo systemctl enable collator

sudo systemctl start collator
```

Check the status of the service:

```
systemctl status collator
```

You should see the node connecting to the network and syncing the latest blocks.
If you need to tail the latest output, you can use:

```
journalctl -u collator.service -f
```

Congratulations! You have officially setup an Tangle Network node using Systemd. If you are interested
in learning how to setup monitoring for your node, please refer to the [monitoring](/docs/tangle-network/node-operators/monitoring/quickstart) page.
